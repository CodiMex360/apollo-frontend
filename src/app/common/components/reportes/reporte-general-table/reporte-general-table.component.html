<div class="main-content">
  <ion-row>
    <ion-col size="12">
      <ion-card class="ion-no-margin ion-no-padding">
        <ion-card-header>
          <h2>Reporte General</h2>
        </ion-card-header>
        <ion-card-content>

<!--          <ion-row>-->
<!--            <ion-col size="12" size-md="9">-->
<!--              <ion-searchbar placeholder="Ingrese un valor para filtrar los resultados de la tabla..." class="ion-no-padding" (ionInput)="applyFilter($event)" (ionCancel)="onSearchClear()"></ion-searchbar>-->
<!--            </ion-col>-->
<!--            <ion-col size="12" size-md="3" class="ion-text-center">-->
<!--              <h4 style="margin: 0">Total Cobrado:</h4>-->
<!--              <span style="color: var(&#45;&#45;ion-color-success); font-weight: 600">{{totalCobrado | currency}} MXN</span>-->
<!--            </ion-col>-->
<!--          </ion-row>-->

          <div class="mat-elevation-z8 table-container">
            <table mat-table
                   [dataSource]="dataSource" multiTemplateDataRows
                   *ngIf="dataSource.length  > 0">

              <ng-container matColumnDef="fecha_renta">
                <th mat-header-cell *matHeaderCellDef>Fecha Renta</th>
                <td mat-cell *matCellDef="let element">
                  <div class="column">
                    <p>
                      {{element.fecha_renta}}
                    </p>
                  </div>
                </td>
              </ng-container>

              <ng-container matColumnDef="folio">
                <th mat-header-cell *matHeaderCellDef>Folio</th>
                <td mat-cell *matCellDef="let element">{{element.folio}}</td>
              </ng-container>

              <ng-container matColumnDef="nombre_cliente">
                <th class="with-expanded-info" mat-header-cell *matHeaderCellDef>Nombre Cliente</th>
                <td class="with-expanded-info" mat-cell  *matCellDef="let element">{{element.nombre_cliente}}</td>
              </ng-container>

              <ng-container matColumnDef="suc_salida">
                <th mat-header-cell *matHeaderCellDef>Suc. Salida</th>
                <td mat-cell *matCellDef="let element">{{element.suc_salida}}</td>
              </ng-container>

              <ng-container matColumnDef="agente_entrega">
                <th mat-header-cell *matHeaderCellDef>Agente Entrega</th>
                <td mat-cell *matCellDef="let element">{{element.agente_entrega}}</td>
              </ng-container>

              <ng-container matColumnDef="agente_recibe">
                <th mat-header-cell *matHeaderCellDef>Agente Recibe</th>
                <td mat-cell *matCellDef="let element">{{element.agente_recibe}}</td>
              </ng-container>

              <ng-container matColumnDef="suc_entrega">
                <th mat-header-cell *matHeaderCellDef>Suc. Entrega</th>
                <td mat-cell *matCellDef="let element">{{element.suc_entrega}}</td>
              </ng-container>

              <ng-container matColumnDef="vehiculo">
                <th mat-header-cell *matHeaderCellDef>Veh√≠culo</th>
                <td mat-cell *matCellDef="let element">{{element.vehiculo}}</td>
              </ng-container>

              <ng-container matColumnDef="placas">
                <th mat-header-cell *matHeaderCellDef>Placas</th>
                <td mat-cell *matCellDef="let element">{{element.placas}}</td>
              </ng-container>

              <ng-container matColumnDef="km_inicial">
                <th mat-header-cell *matHeaderCellDef>Km. Inicial</th>
                <td mat-cell *matCellDef="let element">{{element.km_inicial}}</td>
              </ng-container>

              <ng-container matColumnDef="km_final">
                <th mat-header-cell *matHeaderCellDef>Km. Final</th>
                <td mat-cell *matCellDef="let element">{{element.km_final}}</td>
              </ng-container>

              <ng-container matColumnDef="gas_inicial">
                <th mat-header-cell *matHeaderCellDef>Gas Inicial</th>
                <td mat-cell *matCellDef="let element">{{element.gas_inicial}}</td>
              </ng-container>

              <ng-container matColumnDef="gas_final">
                <th mat-header-cell *matHeaderCellDef>Gas Final</th>
                <td mat-cell *matCellDef="let element">{{element.gas_final}}</td>
              </ng-container>

              <ng-container matColumnDef="total">
                <th mat-header-cell *matHeaderCellDef>Total</th>
                <td mat-cell *matCellDef="let element">${{element.total | currency}}</td>
              </ng-container>

              <ng-container matColumnDef="total_cobrado">
                <th class="with-expanded-info" mat-header-cell *matHeaderCellDef>Total Cobrado</th>
                <td class="with-expanded-info" mat-cell *matCellDef="let element">${{element.total_cobrado | currency}}</td>
              </ng-container>

              <ng-container matColumnDef="fecha_cierre">
                <th mat-header-cell *matHeaderCellDef>Fecha Cierre</th>
                <td mat-cell *matCellDef="let element">{{element.fecha_cierre}}</td>
              </ng-container>


              <!--            <ng-container matColumnDef="{{column}}" *ngFor="let column of reportColums">-->
              <!--              <td mat-cell *matCellDef="let element"> {{element[column]}} </td>-->
              <!--            </ng-container>-->
<!--              <ng-container matColumnDef="expand">-->
<!--                <th mat-header-cell *matHeaderCellDef aria-label="row actions">&nbsp;</th>-->
<!--                <td mat-cell *matCellDef="let element">-->
<!--                  <button mat-icon-button aria-label="expand row" (click)="(expandedElement = expandedElement === element ? null : element); $event.stopPropagation()">-->
<!--                    <mat-icon *ngIf="expandedElement !== element">keyboard_arrow_down</mat-icon>-->
<!--                    <mat-icon *ngIf="expandedElement === element">keyboard_arrow_up</mat-icon>-->
<!--                  </button>-->
<!--                </td>-->
<!--              </ng-container>-->

              <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
              <ng-container matColumnDef="expandedDetail">
                <td mat-cell *matCellDef="let element" [attr.colspan]="columnsToDisplayWithExpand.length">
                  <div class="example-element-detail report-table-expandable"
                       [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">

                    <ion-grid [style]="{'--ion-grid-columns': columnsToDisplayWithExpand.length + 1}">
                      <ion-row>
                        <ion-col size="2" offset="2" class="ion-padding-vertical">
                          <p>Dir. {{element.fullData?.cliente?.direccion}}</p>
                          <p>Lic. {{element.fullData?.cliente?.num_licencia}}</p>
                          <p>Mail. {{element.fullData?.cliente?.email}}</p>
                          <p>Tel. {{element.fullData?.cliente?.telefono}}</p>
                        </ion-col>
                        <ion-col size="5" offset="7" offset-lg="6">
                          <table class="report-cobranza-expandable">
                            <thead>
                            <tr>
                              <th colspan="4">Desgloce Cobranza</th>
                            </tr>
                            </thead>
                            <tr *ngFor="let cobro of element.desgloce_cobranza">
                              <td>
                                {{cobro.cobranza_seccion | titlecase}}
                              </td>
                              <td>
                                {{cobro.tipo}}
                              </td>
                              <td>
                                {{cobro.fecha_procesado | date: 'shortDate'}}
                              </td>
                              <td>
                                {{cobro.tarjeta.c_type}}  {{(cobro.tarjeta.c_cn4) ? '*' + cobro.tarjeta.c_cn4 : ''}}
                              </td>
                              <td>
                                {{(cobro.cod_banco) ? '| CARGO: ' + cobro.cod_banco : ''}}
                              </td>
                              <td>
                                ${{cobro.monto | currency}} {{cobro.moneda}}
                              </td>
                            </tr>
                          </table>
                        </ion-col>
                      </ion-row>
                    </ion-grid>

                  </div>
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="columnsToDisplayWithExpand"></tr>
              <tr mat-row *matRowDef="let element; columns: columnsToDisplayWithExpand;"
                  class="example-element-row"
                  [class.example-expanded-row]="expandedElement === element"
                  (click)="expandedElement = expandedElement === element ? null : element">
              </tr>
              <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
            </table>
          </div>


        </ion-card-content>
      </ion-card>
    </ion-col>
  </ion-row>

</div>
