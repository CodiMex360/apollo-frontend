<div class="main-content">
  <ion-row>
    <ion-col size="12">
      <ion-card class="ion-no-margin ion-no-padding">
        <ion-card-header>
          <h2>Detalle de pagos</h2>
        </ion-card-header>
        <ion-card-content style="padding-left: 12px; padding-right: 12px;" class="ion-no-padding ion-padding-vertical">

          <ion-row>
            <ion-col size="12" size-md="9">
              <app-search-controls  (emitSearchParams)="handleSearchFilter($event)">
              </app-search-controls>
              <ion-searchbar placeholder="Ingrese un valor para filtrar los resultados de la tabla..." class="ion-no-padding" (ionInput)="applyFilter($event)" (ionCancel)="onSearchClear()"></ion-searchbar>
            </ion-col>
            <ion-col size="12" size-md="3" class="ion-text-center">
              <h4 style="margin: 0">Total Cobrado:</h4>
              <span style="color: var(--ion-color-success); font-weight: 600">{{totalCobrado | currency}} MXN</span>
            </ion-col>
          </ion-row>
          <div class="mat-elevation-z8 table-container">
            <mat-table [dataSource]="listDetallePagos" matSort>

              <!-- fecha -->
              <ng-container matColumnDef="fecha">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Fecha</mat-header-cell>
                <mat-cell *matCellDef="let row">
                  <div class="column">
                    <p>
                      {{row.created_at | date: 'short'}}
                    </p>
                  </div>
                </mat-cell>
              </ng-container>

              <!-- folio -->
              <ng-container matColumnDef="folio">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Folio</mat-header-cell>
                <mat-cell *matCellDef="let row">
                  <div class="column">
                    <p>
                      {{row.num_contrato}}
                    </p>
                    <p>
                      Total salida: {{row.total_salida | currency}}
                    </p>
                  </div>
                </mat-cell>
              </ng-container>

              <!-- sucursal -->
              <ng-container matColumnDef="sucursal">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Sucursal</mat-header-cell>
                <mat-cell *matCellDef="let row">
                  <div class="column">
                    <p>
                      {{row.salida?.alias}}
                    </p>
                    <p>
                      Total retorno: {{row.total_retorno | currency}}
                    </p>
                  </div>
                </mat-cell>
              </ng-container>

              <!-- placas-->
              <ng-container matColumnDef="placas">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Placas</mat-header-cell>
                <mat-cell *matCellDef="let row">
                  <div class="column">
                    <p>
                      {{row.vehiculo?.placas}}
                    </p>
                    <p>
                      Total cobrado: {{row.total_final | currency}}
                    </p>
                  </div>
                </mat-cell>
              </ng-container>

              <!-- nombre_auto-->
              <ng-container matColumnDef="nombre_auto">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Nombre Auto</mat-header-cell>
                <mat-cell *matCellDef="let row">
                  <div class="column">
                    <p>
                      {{row.vehiculo?.modelo}}
                    </p>
                    <p>
                      {{row.vehiculo?.color}}
                    </p>
                  </div>
                </mat-cell>
              </ng-container>

              <!-- usuario_crea-->
              <ng-container matColumnDef="usuario_crea">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Usuario Crea</mat-header-cell>
                <mat-cell *matCellDef="let row">
                  <div class="column">
                    <p>
                      {{row.usuario?.nombre}}
                    </p>
                  </div>
                </mat-cell>
              </ng-container>

              <!-- usuario_cierra-->
              <ng-container matColumnDef="usuario_cierra">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Usuario Cierra</mat-header-cell>
                <mat-cell *matCellDef="let row">
                  <p>
                    {{row.usuario_close?.nombre}}
                  </p>
                </mat-cell>
              </ng-container>

              <!-- cobranza_tarjeta_mxn-->
              <ng-container matColumnDef="cobranza_tarjeta_mxn">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Tarjeta MXN</mat-header-cell>
                <mat-cell *matCellDef="let row">
                  <div class="column">
                    <p>
                      {{row.cobranza_tarjeta_mxn ? (row.cobranza_tarjeta_mxn | currency) : '--'}}
                    </p>
                  </div>
                </mat-cell>
              </ng-container>

              <!-- cobranza_tarjeta_usd-->
              <ng-container matColumnDef="cobranza_tarjeta_usd">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Tarjeta USD</mat-header-cell>
                <mat-cell *matCellDef="let row">
                  <div class="column">
                    <p>
                      {{row.cobranza_tarjeta_usd ? (row.cobranza_tarjeta_usd | currency) : '--'}}
                    </p>
                  </div>
                </mat-cell>
              </ng-container>

              <!-- cobranza_efectivo_mxn-->
              <ng-container matColumnDef="cobranza_efectivo_mxn">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Efectivo MXN</mat-header-cell>
                <mat-cell *matCellDef="let row">
                  <div class="column">
                    <p>
                      {{row.cobranza_efectivo_mxn ? (row.cobranza_efectivo_mxn | currency) : '--'}}
                    </p>
                  </div>
                </mat-cell>
              </ng-container>

              <!-- cobranza_efectivo_usd-->
              <ng-container matColumnDef="cobranza_efectivo_usd">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Efectivo USD</mat-header-cell>
                <mat-cell *matCellDef="let row">
                  <div class="column">
                    <p>
                      {{row.cobranza_efectivo_usd ? (row.cobranza_efectivo_usd | currency) : '--'}}
                    </p>
                  </div>
                </mat-cell>
              </ng-container>

              <!-- cobranza_pre_auth_mxn-->
              <ng-container matColumnDef="cobranza_pre_auth_mxn">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Pre-Autorización MXN</mat-header-cell>
                <mat-cell *matCellDef="let row">
                  <div class="column">
                    <p>
                      {{row.cobranza_pre_auth_mxn ? (row.cobranza_pre_auth_mxn | currency) : '--'}}
                    </p>
                  </div>
                </mat-cell>
              </ng-container>

              <!-- cobranza_pre_auth_usd-->
              <ng-container matColumnDef="cobranza_pre_auth_usd">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Pre-Autorización USD</mat-header-cell>
                <mat-cell *matCellDef="let row">
                  <div class="column">
                    <p>
                      {{row.cobranza_pre_auth_usd ? (row.cobranza_pre_auth_usd | currency) : '--'}}
                    </p>
                  </div>
                </mat-cell>
              </ng-container>

              <!-- cobranza_deposito_mxn-->
              <ng-container matColumnDef="cobranza_deposito_mxn">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Deposito MXN</mat-header-cell>
                <mat-cell *matCellDef="let row">
                  <div class="column">
                    <p>
                      {{row.cobranza_deposito_mxn ? (row.cobranza_deposito_mxn | currency) : '--'}}
                    </p>
                  </div>
                </mat-cell>
              </ng-container>

              <!-- cobranza_deposito_usd-->
              <ng-container matColumnDef="cobranza_deposito_usd">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Deposito USD</mat-header-cell>
                <mat-cell *matCellDef="let row">
                  <div class="column">
                    <p>
                      {{row.cobranza_deposito_usd ? (row.cobranza_deposito_usd | currency) : '--'}}
                    </p>
                  </div>
                </mat-cell>
              </ng-container>

              <!-- rows staticos-->
              <ng-container matColumnDef="init">
                <mat-footer-cell *matFooterCellDef colspan="7" style="color: var(--ion-color-primary); font-weight: 400;">
                  Ingrese un valor usando el motor de búsqueda ubicado en la parte superior
                </mat-footer-cell>
              </ng-container>

              <ng-container matColumnDef="loading">
                <mat-footer-cell *matFooterCellDef colspan="7">
                  <mat-spinner [diameter]="40"></mat-spinner>
                </mat-footer-cell>
              </ng-container>

              <ng-container matColumnDef="noData">
                <mat-footer-cell *matFooterCellDef colspan="8" style="color: #2196F3">
                  No data was found
                </mat-footer-cell>
              </ng-container>

              <!--Table Footer-->
              <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
              <!--                <ng-container *ngIf="isModal">-->
              <!--                  <mat-row *matRowDef="let row; columns: displayedColumns;" (click)="editAction(row)" [ngClass]="{hovered: row.hovered, highlighted: row.id === editEmpresa.id}" (mouseover)="row.hovered = true" (mouseout)="row.hovered = false"></mat-row>-->
              <!--                </ng-container>-->
              <ng-container>
                <mat-row *matRowDef="let row; columns: displayedColumns;"  (mouseover)="row.hovered = true" (mouseout)="row.hovered = false"></mat-row>
              </ng-container>

              <mat-footer-row *matFooterRowDef="['loading']" [ngClass]="{hide: spinner === false}"></mat-footer-row>
              <mat-footer-row *matFooterRowDef="['init']" [ngClass]="{'hide':listDetallePagos!=null || spinner === true}"></mat-footer-row>
              <mat-footer-row *matFooterRowDef="['noData']"
                              [ngClass]="{hide:!(listDetallePagos!=null && listDetallePagos.data.length==0)}">
              </mat-footer-row>
            </mat-table>

            <!-- paginator -->
            <mat-paginator [pageSizeOptions]="[2, 5, 10, 25, 100]" [pageSize]="8"
                           showFirstLastButtons></mat-paginator>
          </div> <!-- table content-->
        </ion-card-content>
      </ion-card>
    </ion-col>
  </ion-row>

</div>
